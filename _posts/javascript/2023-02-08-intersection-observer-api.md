---
layout: single
title: 'Intersection Observer API를 활용한 무한 스크롤'
categories: javascript
tag: [javascript, Web API]
toc: true
toc_sticky: true
excerpt: '
무한 스크롤이란?

무한 스크롤 (Infinite Scroll)은 유저가 페이지를 스크롤링 중 최하단에 도달했을 때, 나머지 컨텐츠를 로드하는 페이징 방식으로 페이지 번호를 일일이 클릭해야하는 페이지네이션 (Pagination)보다 편리한 사용자 경험 (UX)을 제공한다. 무한 스크롤의 장단점은 다음과 같다.

장점

- 한번에 모든 컨텐츠를 로드하지 않고, 보여줄 수 있는 만큼만 로드하기 때문에 리소스를 효율적으로 사용.
- 페이지 버튼을 클릭할 필요 없이, 컨텐츠 탐색이 가능하여 편리함.
- 따라서, 페이징이 많이 일어나는 환경 (모바일, 세로로 긴 화면)에 특화.
'
header:
  teaser:

---

## 무한 스크롤이란?

무한 스크롤 (Infinite Scroll)은 유저가 페이지를 스크롤링 중 최하단에 도달했을 때, 나머지 컨텐츠를 로드하는 페이징 방식으로 페이지 번호를 일일이 클릭해야하는 페이지네이션 (Pagination)보다 편리한 사용자 경험 (UX)을 제공한다. 무한 스크롤의 장단점은 다음과 같다.

### 장점

- 한번에 모든 컨텐츠를 로드하지 않고, 보여줄 수 있는 만큼만 로드하기 때문에 리소스를 효율적으로 사용.
- 페이지 버튼을 클릭할 필요 없이, 컨텐츠 탐색이 가능하여 편리함.
- 따라서, 페이징이 많이 일어나는 환경 (모바일, 세로로 긴 화면)에 특화.

### 단점

- 한 페이지에 많은 컨텐츠를 로드할 경우, 성능 하락을 일으킬 수 있음.
- 많은 컨텐츠를 로드한 후, 다시 봤던 컨텐츠로 돌아가는데 번거로움.
- 사이트의 최하단 (Footer)에 도달하기 어려워짐.

## Intersection Observer API란

무한 스크롤을 구현하는 한 가지 방법으로, 브라우저가 기본적으로 제공하는 Web API 중 하나다.

**브라우저 뷰포트(Viewport)와 타겟 요소(Element)의 교차점을 관찰**하며, 이를 통해 뷰포트 안에 해당 요소의 존재 여부를 판단한다. 쉽게 말해, 현재 화면에 요소가 보이고 있는지 여부를 알려주는데 이를 활용하여 다양한 기능을 구현할 수 있다.

### 활용 예시

아래는 MDN에서 설명하는 Intersection Observer API를 활용할 수 있는 예시다.

- 페이지 스크롤 시 이미지를 Lazy-loading(지연 로딩)
- **Infinite scrolling(무한 스크롤)을 통해 스크롤할 때 새로운 콘텐츠를 불러옴**
- 광고의 수익을 계산하기 위해 광고의 가시성을 판단
- 사용자가 결과를 볼 것인지에 따라 애니메이션 동작 여부를 결정

### 실행 로직

Intersection Observer API에는 `observer (관찰자)`, `entry (관찰 대상)`, `option (조건)` 그리고 `callback(콜백함수)`가 존재하며 다음과 같은 일련의 과정을 통해 동작한다.

1. `관찰자`와 `관찰 대상`을 생성
2. `관찰자`는 `관찰 대상`을 관찰
3. `관찰 대상`이 `조건`을 만족하면 `콜백 함수`를 실행

### Scroll Event를 사용하지 않는 이유

이전에는 window 객체에 scroll event를 연결하여 특정 지점까지 스크롤되었을 때, 다음 콘텐츠를 불러오는 식으로 무한 스크롤을 구현했다. 하지만 스크롤을 할때마다 이벤트가 호출되어 성능에 좋지 않았고, 쓰로틀(Throttle)이나 디바운싱 (Debouncing) 같은 최적화 작업이 추가적으로 필요했다.

> - 쓰로틀 (Throttle)
>   : 스크롤 이벤트가 발생한 이후, 일정 시간동안의 이벤트 콜백을 무시

> - 디바운싱 (Debouncing)
>   : 스크롤 이벤트가 연달아 발생하면, 마지막 (혹은 첫번째) 이벤트의 콜백만 실행

Intersection Observer API는 메인 스레드와 별개로 비동기적으로 실행되기 때문에, 최적화 없이도 훨씬 빠른 퍼포먼스를 보여준다.
